#!/bin/bash
# (Add - Move - Delete - Rename - Change - Find) and do lots of shit to the Media Collection


# Source the VAR MOAS
source /usr/local/bin/VAR-SCRIPT

TMP="$(mktemp)"
TMP2="$(mktemp)"
TMP_LOG1="$(mktemp)"


if [ -n "$TERM_LAUNCH" ]
then MOVIE_NAME="$(xclip -o)"
else
MOVIE_NAME=$(dialog --extra-button --extra-label "Back" --stdout  --clear --inputbox \
"Please Enter the name of the Show" 10 50 )
fi

case $? in
0)

find "$MOVIE_SYM" -maxdepth 2 -type d -iname "*$MOVIE_NAME*" \
| sort | while read -r FILE ; do movie_array+=("$FILE") ; done

for i in "${movie_array[@]}"
do

#################################
MOVIE_NAME="$(echo $i  | sed "s/(//g;s/)//g;s/'/\\\\\\'/g")"

#MOVIE_NAME="$( echo $MOVIE_NAME | sed "s/(//g;s/)//g;s/'/\\\\\\'/g" )"
#NAME="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select Name from movies where Name LIKE '%$MOVIE_NAME%'" )"
#SIZE="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select size_mb from movies where Name LIKE '%$MOVIE_NAME%'" ) MB"
#RES1="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select ResWidth from movies where Name LIKE '%$MOVIE_NAME%'" )"
#RES2="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select ResHeight from movies where Name LIKE '%$MOVIE_NAME%'" )"
#DEF="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select definition from movies where Name LIKE '%$MOVIE_NAME%'" )"
#WATCHED="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select Watched from movies where Name LIKE '%$MOVIE_NAME%'" )"
#NOTES="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select notes from movies where Name LIKE '%$MOVIE_NAME%'" )"
NAME="$(mysql --user=root --password="$DB_PASSWORD" movies -e "select * from movies where Name LIKE '%$MOVIE_NAME%'" )"
echo ass
#################################

#if [ ! -z "$NAME" ]
#then

GREEN
echo -e "Name =  
${WHITE}$NAME${COLOR_OFF}"|column -t
GREEN
echo -e "Size =  
${WHITE}$SIZE${COLOR_OFF}"
GREEN
echo -e "Resolution = 
${WHITE}"$RES1 x $RES2"p ${COLOR_OFF}${PURPLE}  "$DEF" ${COLOR_OFF}"
GREEN
echo -e "Watched = 
${WHITE}$WATCHED"
GREEN
echo -e "Notes =  
${CYAN}$NOTES${COLOR_OFF}"
YELLOW



echo -e "${RED}\n-----------################-------------\n${COLOR_OFF}"

#fi

####### For the log file#########
echo -e "
Path= $i
Name =  $NAME
Size =  $SIZE
Resolution = $RES1 x $RES2p  $DEF
Watched = $WATCHED
-----------################-------------
" >> "$TMP_LOG1"

####### For the log file#########

done


#---#

echo -e "${YELLOW}\n-----------################-------------${COLOR_OFF}"
WHITE
find "$MOVIE_SYM"/ -type d -iname "*$MOVIE_NAME*" | sort -bf

echo -e "${YELLOW}\n-----------################-------------\n\n${COLOR_OFF}"


echo "Log File:   sudo geany $TMP_LOG1"

if [ -n "$TERM_LAUNCH" ]
then sleep 1000
fi
;;
1)
_CANCEL_MSG ;; 

3)
ln2tb ;;

esac
