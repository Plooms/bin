#!/bin/bash
# Replay last video file if wanted
SCRIPT_NAME="vlc-alternate-player-repeat"
PID=$$


# Source the VAR MOAS
source /usr/local/bin/VAR-SCRIPT


# Time Calculation
_START_TIME

# Start Lock
_LOCK_ON



#########################################################
# Get the file name from Last-video.txt
FILE="$(cat "$PLAYER_LAST_WATCHED"/Last-Video.txt | tail -n 1)"

F_ARRAY+=("$(tail -n 3 "$PLAYER_LAST_WATCHED"/Last-Video.txt)")

# To get the filename without extensions
FILENAME="$(echo "$FILE" | rev | cut -d"." -f2- | rev)"

# To get the filename without the path
FILENAME2="$(echo "$FILE" | rev | cut -d"/" -f1 | rev)"

echo "${F_ARRAY[1]}"
echo "${F_ARRAY[1]}"
echo "${F_ARRAY[1]}"
echo "${F_ARRAY[1]}"

SELECTION="$(dialog --stdout --radiolist \
"Select Video File:" 10 400 3 \
1 "${F_ARRAY[1]}" off \
2 "${F_ARRAY[2]}" off \
3 "${F_ARRAY[3]}" on )"


#dialog --stdout  --clear --yesno "Replay Video file again :

#$FILENAME2 " 10 50




case $? in
0) 

	case "$SELECTION" in
	1)
	/usr/local/bin/vlc-alternate-player "${F_ARRAY[1]}" ;;
	2)
	/usr/local/bin/vlc-alternate-player "${F_ARRAY[2]}" ;;
	3)
	/usr/local/bin/vlc-alternate-player "${F_ARRAY[3]}" ;;
	esac

;;
1) 
exit 1 ;;
esac


#########################################################

# Time Calculation
_END_TIME

# End Lock
_LOCK_OFF

